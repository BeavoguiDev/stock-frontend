<div class="modal-backdrop">
  <div class="modal-content">
    <h2>➕ Ajouter un produit</h2>

    <div *ngIf="errors.length" class="error-box">
      <ul>
        <li *ngFor="let error of errors">{{ error }}</li>
      </ul>
    </div>

    <form (ngSubmit)="submit()">
      <label for="name">Nom du produit</label>
      <input type="text" [(ngModel)]="formData.name" name="name" required />

      <label for="category_id">Catégorie</label>
      <select [(ngModel)]="formData.category_id" name="category_id" required>
        <option value="" disabled selected>-- Choisir une catégorie --</option>
        <option *ngFor="let cat of categories" [value]="cat.id">{{ cat.name }}</option>
      </select>

      <label for="supplier_id">Fournisseur</label>
      <select [(ngModel)]="formData.supplier_id" name="supplier_id" required>
        <option value="" disabled selected>-- Choisir un fournisseur --</option>
        <option *ngFor="let sup of suppliers" [value]="sup.id">{{ sup.name }}</option>
      </select>

      <label for="buying_price">Prix d’achat</label>
      <input type="number" [(ngModel)]="formData.buying_price" name="buying_price" required />

      <label for="selling_price">Prix de vente</label>
      <input type="number" [(ngModel)]="formData.selling_price" name="selling_price" required />

      <label for="quantity">Quantité</label>
      <input type="number" [(ngModel)]="formData.quantity" name="quantity" required />

      <label for="threshold">Seuil</label>
      <input type="number" [(ngModel)]="formData.threshold" name="threshold" required />

      <label for="expiry_date">Date d’expiration</label>
      <input type="date" [(ngModel)]="formData.expiry_date" name="expiry_date" />
      <input type="file" (change)="onFileSelected($event)" />

      <div class="modal-actions">
        <button type="submit">Ajouter</button>
        <button type="button" (click)="closeModal.emit()">Annuler</button>
      </div>
    </form>
  </div>
</div>
